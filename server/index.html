<html>
    <head>
        <title>Wake up | Her√§tyskello</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    </head>
    <body>
        <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center">
            <div id="notification" class="alert alert-secondary" role="alert" style="visibility:hidden">Hey!</div>
            <h1>Wakey wakey</h1>
            <p>Eik√∂ laiska paskaperse ole noussut?</p>
            <div class="btn-group" role="group" aria-label="Basic example">
                <input type="password" class="form-control" id="token" placeholder="Salasana">
                <button onclick="wakeUp('set')" class="btn btn-success">Soita</button>
                <button onclick="wakeUp('unset')" class="btn btn-danger">Lopeta</button>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            var notification = document.getElementById("notification");
            function wakeUp(bl) {
                let token = document.getElementById("token").value;
                $.get( "wakey/" + bl + "?token=" + token, function( data ) {
                    if (data == "success") {
                        notification.style.visibility = "visible";
                        if (bl == "set") {
                            notification.innerHTML = "Her√§tet√§√§n... üòà";
                        } else {
                            notification.innerHTML = "Her√§tys loppu! üòÅ";
                        }
                    } else {
                        notification.innerHTML = "Tapahtui virhe... üòû";
                        notification.style.visibility = "visible";
                    }
                });
            }
        </script>
    </body>
</html>
